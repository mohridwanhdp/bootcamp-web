<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Display a map on a webpage</title>
    <meta
      name="viewport"
      content="initial-scale=1,maximum-scale=1,user-scalable=no"
    />
    <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.2/mapbox-gl-geocoder.min.js"></script>
    <link
      rel="stylesheet"
      href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.2/mapbox-gl-geocoder.css"
      type="text/css"
    />

    <link
      href="https://api.mapbox.com/mapbox-gl-js/v2.4.1/mapbox-gl.css"
      rel="stylesheet"
    />
    <link href="./css/style.css" rel="stylesheet" />
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.4.1/mapbox-gl.js"></script>

    <!-- <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.1.0/mapbox-gl-directions.js"></script>
<link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.1.0/mapbox-gl-directions.css" type="text/css"> -->

    <style>
      body {
        margin: 0;
        padding: 0;
      }

      #map {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 100%;
        z-index: 1;
      }
    </style>
  </head>

  <body>
    <div>
      <div id="map">
        <div id="button-map">
          <button class="button-change" onclick="changeMap('streets-v11')">
            Street
          </button>
          <button class="button-change" onclick="changeMap('satellite-v9')">
            Satellite
          </button>
        </div>
      </div>
      <script type="text/javascript">
        mapboxgl.accessToken =
          "pk.eyJ1IjoibW9ocmlkd2FuaGRwIiwiYSI6ImNrMDRvaGwzdDA0dDkzaG9tNnA3dmViODQifQ.qa1W5PaDaHzLnqIXbAM7zw";
        const map = new mapboxgl.Map({
          container: "map", // container ID
          style: "mapbox://styles/mapbox/streets-v11", // style URL
          center: [106.774124, -6.121435], // starting position [lng, lat]
          zoom: 9 // starting zoom
        });
        map.addControl(
          new MapboxGeocoder({
            accessToken: mapboxgl.accessToken,
            mapboxgl: mapboxgl
          })
        );
        map.addControl(new mapboxgl.NavigationControl());
        map.addControl(new mapboxgl.FullscreenControl());

        // map.addControl(
        //   new MapboxDirections({
        //     accessToken: mapboxgl.accessToken
        //   }),
        //   "bottom-left"
        // );
        map.addControl(
          new mapboxgl.GeolocateControl({
            positionOptions: {
              enableHighAccuracy: true
            },
            // When active the map will receive updates to the device's location as it changes.
            trackUserLocation: false,
            // Draw an arrow next to the location dot to indicate which direction the device is heading.
            showUserHeading: true
          })
        );
        map.once('load',function(){
          let geolocate = document.getElementsByClassName("mapboxgl-ctrl-geolocate");
          setTimeout(function() {
            geolocate[0].click();
        },20);
        })
        map.addControl(new mapboxgl.AttributionControl({
customAttribution: 'MAPID ACADEMY'
}), 'top-left');

        function changeMap(basemap) {
          map.setStyle("mapbox://styles/mapbox/" + basemap);
        }
      </script>
    </div>
  </body>
</html>
